{% extends "base.html" %}

{% block content %}
<div class='container'>
<h1>Oczekujące Płatności</h1>
<table>
    <thead>
        <tr>
            <th>Imię</th>
            <th>Nazwisko</th>
            <th>Pesel</th>
            <th>ID Wizyty</th>
            <th>Koszt</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for payment in pending_payments %}
            <tr>
                <td>{{ payment.name }}</td>
                <td>{{ payment.surname }}</td>
                <td>{{ payment.pesel }}</td>
                <td>{{ payment.appointment_id }}</td>
                <td>{{ payment.amount }}</td>
                <td><button class="btn btn-outline-secondary btn-block button-personalized" type="button" data-toggle="modal" data-target="#payment-form">Opłać</button></td>
            </tr>
        {% endfor %}
    </tbody>
</table>
</div>

<div class='container'>
<h1>Historia Płatności</h1>
<table>
    <thead>
        <tr>
            <th>Imię</th>
            <th>Nazwisko</th>
            <th>Pesel</th>
            <th>ID_wizyty</th>
            <th>Data</th>
            <th>Sposób zapłaty</th>
            <th>Koszt</th>
        </tr>
    </thead>
    <tbody>
        {% for payment in payment_history %}
            <tr>
                <td>{{ payment.name }}</td>
                <td>{{ payment.surname }}</td>
                <td>{{ payment.pesel }}</td>
                <td>{{ payment.appointment_id }}</td>
                <td>{{ payment.date_paid }}</td>
                <td>{{ payment.method_of_payment }}</td>
                <td>{{ payment.amount }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
</div>

<div class="modal fade" role="dialog" tabindex="1" id="payment-form"> 
    <div class="py-1">
        <div class="modal-dialog modal-lg">
            <div class = 'modal-content'>
                <div class="modal-header">
                    <h5>Wybierz sposób zapłaty</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form" novalidate="" action="/make_payment" method="POST">
                    <div class="custom-control custom-control-inline custom-checkbox custom-control-nameless m-0 align-top">
                        <input type="checkbox" class="custom-control-input" id="checkbox-1">
                        <label class="custom-control-label" for="checkbox-1">wygeneruj fakturę</label>
                    </div>
                    <div class="col text-center">
                        <button class="button-personalized btn btn-block btn-outline-secondary" type="submit">Gotówka</button>
                        <button class="button-personalized btn btn-block btn-outline-secondary" type="submit">Karta Płatnicza</button>
                        <button class="button-personalized btn btn-block btn-outline-secondary" type="submit">Blik</button>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}